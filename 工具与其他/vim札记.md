# vim札记

## vim的常用模式
vim的常用模式大概有四种：普通模式(Normal mode)、插入模式(Insert mode)、可视模式(Visual mode)和命令行模式(Command line mode)，这四种模式还可以派生出其他的模式。这四种模式的作用即转换关系如下：

- 普通模式。普通模式是vim启动后的默认模式。在普通模式中，有很多方法可以进入插入模式，比较普通的方式是按a（append／追加）键或者i（insert／插入）键和"o"（可以在当前行的下面另起一行，并使当前模式转为Insert模式）。
- 插入模式。在这个模式下，可以进行插入操作。可以通过Esc按键进入普通模式。
- 可视模式。这个模式与普通模式比较相似，但是移动命令会扩大高亮的文本区域。在普通模式下，可以按`v`按键进入可视模式。
- 命令模式：在命令行模式中可以输入会被解释成并执行的文本。例如执行命令（:键），搜索（/和?键）或者过滤命令（!键）。在命令执行之后，Vim返回到命令行模式之前的模式，通常是普通模式。

这几种模式的转换图可以表示如下：

<div align="center">
<img src="">
</div>

## `.`命令
`.`命令的作用就是重复上次的操作。该命令可以和很多命令结合使用，比如：

- 在普通模式下，使用`x`命令会删除光表示下的字符，在这种情况下使用  `.`命令“重复上次修改”时，就会让 Vim 不断删除光标下的字符。
- `>G`  命令会增加从当前行到文档末尾处的缩进层级。如果我们在此命令后使用`.`命令，那么“重复上次修改”会让 Vim 增加从当前行到文档末尾的缩进层级。

每次进入插入模式时，也会形成一次修改。从进入插入模式的那一刻起（例如，输入 `i`），直到返回普通模式时为止（输入`<Esc>`），Vim 会记录每一个按键操作。做出这样一个修改后再用`.`命令的话，它将会重新执行所有这些按键操作。

`.`命令可以看成是一个很小的“宏”(macro)，使用这样的“宏”， Vim 可以录制任意数目的按键操作，然后在以后重复执行它们。

### 复合命令
vim中有很多复合命令，可以把两个命令合并成一个，例如，现在有以下java代码，现在需要在每一句的后面加上“;”。

```java
public static void main(String[] args){

        System.out.println("hello world")
        System.out.println("hello tom")
        System.out.println("hello jerry")
        System.out.println("hello bob")
        System.out.println("hello alice")
}
```
要实现这个功能，可以再普通模式下使用`$`命令将光标移动到行尾，然后执行`a;<Esc>`命令执行插入操作，之后使用`j.`命令，将光标移动到下一行并重复插入操作。

为了减少无关的移动操作，vim提供了一个复合操作命令`A`，它相当于`$a`，也就是说，不管当前光标位置在何处，使用`A`命令都会将光标移动到行尾并进入插入模式。

常用的复合命令如下：

|复合命令|等效的长命令|作用|
|-|-|-|
|C|c$|剪切当前行中光标及后面的部分，并进入编辑模式。剪切之后，进入普通模式使用p命令可以进行粘贴|
|s|cl|剪切当前光标中的字符，并进入编辑模式。同样，进入普通模式之后可以使用p命令进行粘贴|
|S|^c|将光标移动到行首，剪切一整行的数据，并进入插入模式|
|I|^i|将光标移动到行首，并进入插入模式|
|o|A<Enter>|在当前行的下面另起一行，并进入插入模式|
|O|ko|在当前行的上面另起一行，并进入插入模式|


# 普通模式下的命令

- `j`：上移一行
- `k`：下移一行
- `$`：移动到行尾
- `f`：在当前行查找某个字符，并将光标定位到第一次出现的位置。比如`f+`是将光标定位到当前行中`+`第一次出现的位置
- `;`：和`f`命令结合，会重复查找上次`f`命令所查找的字符